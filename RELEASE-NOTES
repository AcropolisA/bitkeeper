Release notes for BitKeeper version beta10.4.2

We have binary releases for Linux, Irix6, and FreeBSD 2.2.

Installation
-----------------------------------------------------------------------------

The binary tarball unpacks into a directory named "bitkeeper".  This
may be placed in /usr or /usr/local as you see fit.  Several files
should then be symlinked from the bitkeeper directory into a public
binary directory.  The minimum is bitkeeper/bk and bitkeeper/get.  If
you wish to use BitKeeper in conjunction with Emacs vc-mode, you will
also need to symlink admin, delta, prs, rmdel, and unget.  Do NOT
symlink ci and co; this will interfere with RCS.  We no longer
recommend that you place the bitkeeper directory in your PATH.

For you cut and paste fans:

	BK=/usr/bitkeeper	# change this to match your installation
	cd /usr/bin
	ln -s $BK/bk .
	ln -s $BK/get .
	ln -s $BK/admin .
	ln -s $BK/delta .
	ln -s $BK/prs .
	ln -s $BK/rmdel .
	ln -s $BK/unget .

You will need Tcl and Tk for the GUI, and Perl for resync and
resolve.  Recommended versions are Tcl/Tk >=8.0.4, Perl >=5.004.
If /bin/sh is not POSIX compliant, "bk" won't work.  Try changing the
#! line to point at ksh or bash if you have problems.

Some vendors' versions of diff have bugs which are tickled by
BitKeeper.  If you have problems, we recommend you install GNU diff.

Upgrade notes
-----------------------------------------------------------------------------

1) first thing you do is tar up your repositories in case something goes
   wrong.  This is beta software, and while we have been unable to break
   it for all of 259,212,152,425,926 nanoseconds, you shouldn't give that
   any weight.

2) in each repository, run

        bk cset -vfM1.0..
   
   This goes through and makes sure that all of your change sets are actually
   recorded in the various files.  When we add the transaction log we won't
   need this anymore, but for now...

3) in each repository, make sure that BK is happy by:

        bk -r check -a

   This goes through and makes sure that each delta in each file that says it
   is in a change set actually _is_ in a change set.  Then we do it the other
   way, for each change set in the ChangeSet file, we make sure that the 
   change set is marked in the files.  Then we make sure that all the files
   and deltas that are in the ChangeSet file are in the repository (this will
   flag any missing files).

4) If you find any missing files, you have several options.  
   a) if the files are truly missing in all repositories (this can happen
      if someone inadvertently checked in a.out and then somebody had the
      bright idea of removing SCCS/s.a.out), then you can add the key for
      the file to BitKeeper/etc/gone and check in the gone file with a
      "bk new gone".  The key should be that nasty looking string that BK
      spits out when you run check, like

        lm@lm.bitmover.com|src/undo.c|19990818003019|59393
      
      no leading / trailing spaces, please.

      Note: the gone file doesn't make files be gone, you did that.  All
      it does is make BK not be upset that they are gone.  If the file 
      ever reappears, BK will ignore the entry in the gone file.

   b) if you can find the file somewhere else, try copying it in by hand 
      and then repeat the 

        bk cset -vfM1.0..
        bk -r check -a
    
      if you get no errors, you're done.

   c) if the proceeding gave you errors, then your recovered file is either
      ahead of or behind the repository.  Contact us and we'll help you fix
    it.

5) There are some new commands which you may like:

    bk version - shows BK version like so:
    BitKeeper version is beta10.4.1 19990901010210

    bk status - shows the status of a tree like so:
    Status for BitKeeper repository /home/bk/beta10
    BitKeeper version is beta10.4.1 19990901010210
    51 files not under revision control.
    1 files modified and not checked in.
    0 files with uncommitted deltas.

Changes from last release
-----------------------------------------------------------------------------

Two BitKeeper system files have been renamed:

BitKeeper/etc/csets -> Bitkeeper/etc/csets-in
BitKeeper/etc/pushed -> BitKeeper/etc/csets-out

Typically these files are accessed by the user supplied trigger scripts.
This mean your trigger scripts must be updated when you upgrade to
BitKeeper 2.0.


Known bugs
-----------------------------------------------------------------------------

Resolve has severe problems related to renaming files.  We recommend
that you avoid attempting to merge conflicts in a file which has been
renamed in the same changeset(s).  In other words, if you're gonna
rename something, make sure everyone else picks up the rename before
editing the file again.

Import and rcs2sccs still don't work nearly as well as we would like.
You can get your CVS tree converted, but it will take quite a bit of
handholding.  See the comments in rcs2sccs.perl.

Excessive use is made of files in /tmp.  There may be security issues
related to this.

Files with extremely long (>2048 chars) lines will overflow static
internal buffers.

Metadata (symbols, permissions, etc) is not versioned and does not
propagate in resyncs.

LODs are still not implemented.

