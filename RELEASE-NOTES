===============================================================================
Release notes for BitKeeper version 3.0.4.   These release notes cover
the following topics:

. Upgrade Notes
. New Features
. Noteworthy bug fixes

Upgrade notes
----------------------------------------------------------------------------

Nothing is required to upgrade from the 3.0.3 release.

New Features
----------------------------------------------------------------------------

  When running under rxvt on Windows the stderr output gets buffered.  Add
  a setbuf() to make stderr unbuffered.

  revtool has "a" accelerator to show annotated listes and "C" accelerator
  to jump to csettool.

  Fix some performance problems that should provide a noticable speedup for
  users with large ChangeSet files.

  Fix some performance problems which should help the openlogging users.

Noteworthy Bug Fixes
----------------------------------------------------------------------------

  2002-02-13-006: Fix expanding of already expanded RCS keywords
  2003-09-10-002: Fix tags in BKWeb
  2003-02-27-002: Don't rewrite localhost URLs
  2003-11-21-005: Takepatch filename printing

  Fix a bug in citool that was throwing away comments when you clicked on
  the icon for a new file.

  Workaround a Windows problem where strerr was being buffered for
  some reason.

  Fix some license checks so users won't be prompted for some licenses
  when running bk in scripts or triggers.

  Do not allow people to cset -x merge nodes, that can break some BK 
  invariants.

===============================================================================
Release notes for BitKeeper version 3.0.3.   These release notes cover
the following topics:

. Upgrade Notes
. New Features
. Noteworthy bug fixes

Upgrade notes
----------------------------------------------------------------------------

IMPORTANT
    This release corrects a rare problem where complicated merges could
    be resolved sub-optimally.  Please upgrade to this release as soon
    as possible.  To find out if any of your existing merges might have
    been effected by this problem please run 'bk _find_merge_errors' on
    each repository and follow the instructions given by that program.


Nothing is required to upgrade from the 3.0.2 release.
However when upgraded any running bkd's must be restarted.

New Features
----------------------------------------------------------------------------

  Execution of triggers is now logged in the BitKeeper/log/cmd_log file.

  In the triggers man page we provide a more complete example of the
  paranoid trigger to avoid csets that try to introduce rogue triggers.


Noteworthy Bug Fixes
----------------------------------------------------------------------------

  2003-08-26-001: stripdel asserts when edited gfile is missing
  2003-08-28-002: fix instructions for running 'bk links' in installer
  2003-08-15-001: 'bk pull -n' and 'bk pull -nl' returned different results
  2003-08-28-001: 'bk changes -r+ -hnd:KEY: URL' didn't work
  2003-03-04-002: RESYNC dir left in . if clone failed
  2003-03-04-003: lclone -rBadRev makes a clone
  2003-02-25-001: chmod -w . ; bk clone ../repo : bad message

  Fix some problems when running on SCO's NFS client code.

  Fixed 'bk export' so that csetkeys can be passed for the revision
  argument. 

  BitKeeper was broken in New Zealand because of a timezone problem.

===============================================================================
Release notes for BitKeeper version 3.0.2.   These release notes cover
the following topics:

. Upgrade Notes
. New Features
. Noteworthy bug fixes

Upgrade notes
----------------------------------------------------------------------------

Nothing is required to upgrade from the 3.0.1 release.

New Features
----------------------------------------------------------------------------

  Add support for SCO (x86), Tru64 (Alpha), and Linux (mips) platforms

  Tcl/Tk is now included is distribution, eliminating dependencies on the
  installed version.

  Windows support now uses Cygwin 1.3.22

  Consistency checks now display a progress bar unless -q is passed or BK_NOTTY
  is set.

  All BitKeeper files formerly stored in $HOME/.bk* are now stored in
  the $HOME/.bk subdirectory.  Old files are migrated automatically.

  The new install image includes a graphical installer that is run by
  default if $DISPLAY is set. (or on Windows) 

Noteworthy Bug Fixes
----------------------------------------------------------------------------

  2000-04-17-003 Try to get the real user name if all we have is root
  2002-11-07-001 revtool fails when run on a certain repository
  2002-12-09-004 some colors are missing from X configs
  2002-12-18-001 sfiles -i in corrupted tree dumps core
  2002-12-28-002 have rclone respect checkout preference
  2003-01-16-001 fix line length limitation with compressed files
  2003-01-17-003 import -tRCS -jN fails if N is too large
  2003-01-24-001 allow tags to contains spaces
  2003-02-03-002 add remote level to push error messages
  2003-02-19-001 takepatch could fail if patches contain really long lines
  2003-05-20-002 Evaluation license quota error message "off-by-one"
  2003-06-03-002 Sometimes -rREV1,REV2,REV3 would fail

  Fix permissions problems in resolve.  In some cases where a user
  only has partial write permissions to a repository, resolve could
  fail after partially applying an incoming patch.  This left the tree
  in an unusable state.  These problems are now detected.

  'bk changes -L' could rarely report csets that do exist in the
  remote tree when there are local tags.  This is now fixed.

  win32: Handle windows style pathnames in 'bk mv'

  Fix race condition that can result in the lost of the ChangeSet file
  when multiple people access the same repository.

  Fix some cases where the 3-way merge could generate really strange
  results.  Significantly improved merging in some conditions.

  Make 'bk fix -c' work better in checkout:edit mode.

  Fix some obscure csetprune bugs...

  Fix problem with 'bk multiuser' when upgrading single_user repository.

  Fix a problem where 'bk changes' and 'bk sccslog' could assert
  because of a fixed sized buffer for expanding dspec keywords.
  BUGIDs: 2003-04-04-001 2002-02-28-002 2002-09-13-001
  
  Do a better job of handling file comments with really long lines.  Also
  add a 'bk delta -Yfile' option like 'bk commit -Yfile'.

  Fix performance problem with 'bk -r diffs -u'.

  Fix problem with GUI tools where sometimes they would start out partially
  constructed and then get redrawn correctly.

  Add a BK_PATCH variable which contains the full path to the
  patch file.  This is passed to pre-resolve triggers.

  Fix the log format for a bkd to be less verbose.

  Fix a bug in 'bk import -tpatch' were a failed patch that deletes a file
  can leave that file locked without a gfile.

  Fix problem with restarting a BKD where existing children are still
  holding the socket open.

  User authentication to HTTP proxies was broken in 3.0.1, it is fixed
  again now.

===============================================================================
Release notes for BitKeeper version 3.0.1.   These release notes cover
the following topics:

. Upgrade Notes
. New Features
. Noteworthy bug fixes

Upgrade notes
----------------------------------------------------------------------------

Nothing is required to upgrade from the 3.0 release.

New Features
----------------------------------------------------------------------------

  - Export a BK_COMMENTFILE variable so that the pre-commit triggers
    can check the comments for entries such as BUGIDs
    (see 'bk help trigger' for more information)

  - Several Performance enhancements
     - recode some sections of takepatch to dramatically speedup
       applying large numbers of deltas to 1 file
     - Fixes to make 'bk clone -l' faster
     - enable partial checks in 'bk clone -l' and 'bk undo'

  - Now each repository generates a unique identifier that can be used
    for tracking.  The id can be fetched with 'bk id -r' and it is
    passed to triggers in BK_REPO_ID and BKD_REPO_ID.  The ID of
    remote repositories are also recorded in the logs.
  
  - Added the ability for the following GUIs to save and restore their
    geometry information: renametool, fmtool, fm3tool, citool, bugform

  - win32: make installation of bkshellx.dll and bkscc.dll optional

  - Added :MD5KEY: dspec that can be used to get a shorter unique id
    for a delta or changeset.

  - Add 'bk obscure' command to scramble your tree.  That allows
    sending repositories to BitMover for debug without revealing
    secret IP.

  Security fixes:

    Put all tmp files in BitKeeper/tmp by default.  Allow user to
    change the tmp location with TMPDIR

    Never use /bin/sh to run subprocesses

Noteworthy Bug Fixes
----------------------------------------------------------------------------

  2002-09-13-002: 'bk parent' prints bogus error when there is no parent
  2002-10-10-002: If takepatch fails because a file is edited print the 
		  original file name not the name it will be after this 
		  patch.
  2002-10-11-001: Exiting resolve early will no longer clean some
		  files in the users tree.
  2002-10-11-002: A failed undo will no longer clean some files in the
		  users tree.
  2002-10-14-001: Importing huge repositories caused an assert
  2002-11-15-002: 'bk changes -uUSER -c-1w' didn't work.
  2002-11-19-002: revtool would sort revisions incorrectly (1.9 vs 1.10)
  2002-11-06-002: Go to a different uid/gid permanently in bkd.
  2002-11-23-001: 'dlm' in "bk resolve" now does the right thing
  2002-11-25-003: Prompts go to stderr instead of stdout.

  2002-11-26-001 2002-11-05-002 2002-09-30-005 2002-08-16-001
  2002-06-27-002: Fix various bugs with the handling of checkout:edit
		  in 'bk fix -c' 'bk cset -x' and 'bk unrm'

  Fix bug where changes in an edited config file didn't get used during
  a pull.

  Fix bug where DOS line termination was not always removed correctly
  when a file is originally created or imported.

  Fix bug that didn't allow people to enable single_user repositories
  and openlogging at the same time. Though it's not clear why a user
  would want to use these together.

  Fix rare condition where a tag conflict doesn't go away after it is
  resolved originally.

  Fix some problems running on a case-folding file system under UNIX.
  The default FS for Mac OS X is an example.

  Minor bug in SCCS keyword expansion.  '% %A%' didn't expand

  citool will now always report any errors or unexpect output from 
  'bk commit' to the user and give them a chance to recover.

  Fixed problem where the license information in the
  BitKeeper/etc/config file was not always used if the information was
  not committed.

  Fixed some bugs where the Windows version could get confused by 
  autoproxy support in IE.

  Fix problems on Windows when the native Tcl (included with
  BitKeeper) and the Cygwin Tcl are both installed on the users
  machine.  Bk now finds the correct version of Tcl.

  Fix problems running a bkd when it doesn't have write permission to
  a repository.
  
===============================================================================
Release notes for BitKeeper version 3.0

bk-3.0 was released on october 10th, here are the release notes against
bk-2.1.6-pre5; we probably won't do relnotes vs bk-2.0.x unless people
really need them, as far as we can tell everyone is running 2.1.x.

Bug fixes
    - catch all error returns from zlib, catches truncated files.
    - bk cp 
    - many repo locking problems fixed, locking stress tested
    - better handling of config logging
    - more complete handling of checkout:{get,edit}
    - bk mv now works like Unix mv
    - csetprune fully supported
    - various bugs in fm3tool (3 way file merge) fixed
    - more polished look and feel for the GUIs
    - the cursor no longer disappears in citool
    - citool no longer loses comments in the error path
    - attempt to have the default GUI fonts be reasonable on all resolutions
    - bk changes can list changes in a remote repository; it has many useful
      options such as the ability to filter on user, strings, etc.
    - fixed the search path for programs, the last component wasn't used
    - cvs import supported on windows
    - patch imports now work into trees which have modified / new files
    - patch import does repository locking
    - make interrupts in delta/commit work consistently on Unix & Windows
    - the config option partial_check is more widely supported 
    - Partial list of closed bugs:
      2001-01-06-003 resolve doesn't respect the checkout policy
      2001-01-08-003 pull, pull which fails, bk unpull unpulls the first
      2001-02-07-002 menus in guitools look like buttons.
	make them look like menus
      2001-02-21-004 bk clone /nonexistant/dir dir fails strangely
      2001-06-29-003 citool loses the comments in too many different situations
      2001-08-29-001 BK installer installs
	files world-writeable owned by uid 3536
      2001-09-26-001 Changed comment in citool's ChangeSet is not saved
      2002-02-26-003 revtool fails with
      2002-03-01-004 sendbug GUI window too tall on 1024x480 screen
      2002-03-24-002 changes -R can hang when there are no changes
      2002-04-02-001 bk changes needs to retry if it can't get a lock
      2002-04-02-002 chmod - wrong argument causes repository loss
      2002-04-03-001 bk tag should not allow commas in tags
      2002-04-06-002 ASCII files can falsely be identified as binary
      2002-04-09-002 bk chmod needs to respect checkout pref
      2002-04-10-003 bk resync won't pull from other url than parent
      2002-04-16-002 changes -R asserted
      2002-04-17-002 Double file moves leak cfiles
      2002-04-23-001 bk patch assertion failure.
      2002-05-02-001 with checkout:get in config file,
	BitKeeper/deleted files are all checked out
      2002-05-10-002 bk pull errors don't re-edit the working files
      2002-05-10-004 bk: port/mnext.c:17: mnext:
	Assertion 's[-1] == '\n'' failed.
      2002-05-27-001 bkd outputs wrong base href for
	"changeset activity for <user>" page
      2002-07-10-002 bk chmod doesn't obey checkout: get
      2002-08-28-001 bk get SCCS/*.jpeg SCCS/*.png
	in linux-2.4 bitkeeper tree crashes
      2002-08-30-001 bk fix -c leaves the repository inconsistent
	for files with a space in their path/name
      2002-09-09-003 Command mis-match on citool
      2002-09-11-001 "bk changes -a" behavior doesn't
	imply -e, despite what the documentation says...
      2002-09-11-002 "bk changes -R" and "bk changes -L" inconsistent
      2002-09-12-001 "bk push" error message tells user to use obsolete commands
      2002-09-19-004 "bk comments -"
	dumps core when input contains header but no comments

Performance enhancements
    - both sides of a pull/push now do 1 pass over the ChangeSet file, the
      more changesets you are pulling at one time, the more this helps.
      In an extreme example it went from 20 minutes to 3 seconds.
    - removed N^2 and N! loops in check and takepatch
      
Interface changes / additions
    - bk help/helptool ignore case by default in searches
    - bk import -temail (from Linus)
    - bk man added and the man page source is shipped so you can print them
    - bk prompt interface which works in GUI or cli mode
    - -r<rev> may be replaced with -r@<csetrev>.  Eg bk -r diffs -r@bk-2.0
    - bk clone -l (aka lclone) runs same triggers as regular clone
    - bk relink can take multiple directories
    - bk setuptool, graphical project creator, much nicer than bk setup
    - bk csettool can toggle annotations on/off
    - bk csettool has vi-like forward/back/expose bindings
    - bk helptool has vi-like forward/back bindings
    - GUI tools "remember" their size and location
    - bk revtool always does forward diffs
    - "d" always works in revtool, even with only one node selected
    - bk bkd -s<dir> is no longer supported, see -C
    - bkd.1 notes that it does not work when started in subst'ed drive.
    - bk check has -gg/-ggg options for handling both gone-ed files and/or
      gone-ed deltas.  Also has -ff to fix fixable errors which where the
      fixes may be destructive (unlikely to be needed by anyone other than
      the MySQL maintainers)
    - bk check prints shorter error messages with a tag, like (chk2).  To
      see the long message run "bk help <tag>"
    - bk comments with no args implies -C+
    - bk ci/delta now respects the SCCS/c.<file> as implied comments
    - bk getuser -r option added to get real user (not $BK_USER)
    - bk parent -p
    - bk prs has new keywords LI/LD/LU/IMPORTER
    - Added $no_proxy env var, see bk help url
    - bk grep prints full path names instead of basenames
    - bk tag does not allow , or .. in tag names
    - installer takes a -f option to just install it

Commercial user changes
    - added digital signatures for license keys, you must get a signed key
      to run bk-3.0.

Platforms
    - MacOS X (command line only)
    - Linux/IA64 (Itanium)
    - Linux/PARISC
    - Linux/zseries
    - statically linked Linux/x86
