Release notes for BitKeeper version 2.0.   These release notes cover
the following topics:

. Installation
. Upgrade Notes
. Changes from last release
	. Interface changes
	. New Features
	. Noteworthy bug fixes
. Known Bugs


We have binary releases for Linux, Irix6, and FreeBSD 2.2, HP-UX, AIX,
Solaris, Windows98/NT/2000.

Installation
-----------------------------------------------------------------------------

The binary tarball unpacks into a directory named "bitkeeper".  This
may be placed in /usr or /usr/local as you see fit.  Several files
should then be symlinked from the bitkeeper directory into a public
binary directory.  The minimum is bitkeeper/bk and bitkeeper/get.  If
you wish to use BitKeeper in conjunction with Emacs vc-mode, you will
also need to symlink admin, delta, prs, rmdel, and unget.  Do NOT
symlink ci and co; this will interfere with RCS.  We no longer
recommend that you place the bitkeeper directory in your PATH.

For you cut and paste fans:

	BK=/usr/bitkeeper # change this to match your installation
	cd /usr/bin
	ln -s $BK/bk .
	ln -s $BK/get .
	ln -s $BK/admin .
	ln -s $BK/delta .
	ln -s $BK/prs .
	ln -s $BK/rmdel .
	ln -s $BK/unget .

You will need Tcl and Tk for the GUI, and Perl for resync and
resolve.  Recommended versions are Tcl/Tk >=8.0.4, Perl >=5.004.
If /bin/sh is not POSIX compliant, "bk" won't work.  Try changing the
#! line to point at ksh or bash if you have problems.

Some vendors' versions of diff have bugs which are tickled by
BitKeeper.  If you have problems, we recommend you install GNU diff.

Upgrade notes
----------------------------------------------------------------------------

1) As a precautionary measure, we recommend the first thing you do is backup
   your repositories in case something goes wrong.

2) in each repository, run

        bk cset -vfM1.0..

   This makes sure that all of your change sets are actually
   recorded in the various files.  When we add the transaction log we won't
   need this anymore, but for now...

3) in each repository, make sure that BitKeeper is happy by:

        bk -r check -a

   This makes sure each delta in each file that says it is in a change
   set actually _is_ in a change set.  Then we do it the other
   way:  for each change set in the ChangeSet file, we make sure that the
   change set is marked in the files.  Then we make sure that all the files
   and deltas in the ChangeSet file are in the repository (this will
   flag any missing files).

4) If you find any missing files, you have several options:
   a) if the files are truly missing in all repositories (this can happen
      if someone inadvertently checked in a.out and then somebody had the
      bright idea of removing SCCS/s.a.out), then you can add the key for
      the file to BitKeeper/etc/gone and check in the gone file with a
      "bk new gone".  The key should be that nasty looking string that BK
      spits out when you run check, like

        lm@lm.bitmover.com|src/undo.c|19990818003019|59393

      no leading / trailing spaces, please.

      Note: the gone file doesn't make files be gone, you did that.  All
      it does is make BK not be upset that they are gone.  If the file
      ever reappears, BK will ignore the entry in the gone file.

   b) if you can find the file somewhere else, try copying it in by hand
      and then repeat the

        bk cset -vfM1.0..
        bk -r check -a

      if you get no errors, you're done.

   c) if the proceeding gave you errors, then your recovered file is either
      ahead of or behind the repository.  Contact us and we'll help you fix
      it.

5) There are some new commands which you may like:

    bk version - shows BK version like so:
    BitKeeper version is 20000919233720 for x86-glibc21-linux

    bk status - shows the status of a tree like so:
     Status for BitKeeper repository work.bitmover.com:/home/bk/stable
     BitKeeper/Free,bkweb version is 20000919233720 for x86-glibc21-linux
     Built by: lm@work.bitmover.com
     Built on: Tue Sep 19 17:01:38 PDT 2000
     Parent repository is work.bitmover.com:/home/bk/lm
     Pending patches
         73 people have made deltas.
       1068 files under revision control.
          2 files not under revision control.
          0 files modified and not checked in.
          0 files with checked in, but not committed, deltas.


Changes from last release
----------------------------------------------------------------------------

This section contains information on the following topics:

. Interface changes
. New features
. Noteworthy bug fixes


Interface Changes
----------------------------------------------------------------------------

a) Two BitKeeper system files have been renamed:

BitKeeper/etc/csets -> Bitkeeper/etc/csets-in
BitKeeper/etc/pushed -> BitKeeper/etc/csets-out

Typically these files are accessed by the user supplied trigger scripts.
This mean your trigger scripts must be updated when you upgrade to
BitKeeper 2.0.

b) bk export now exports all files except the ChangeSet file.
   (In 1.x the files under the BitKeeper directory are not exported)
   User can select files for export by using the export -x/-i options.

c) bk mkdiffs command has been removed in 2.x.  It is replaced by
   bk export -tpatch, which is much faster.

d) The new default option of "bk lock" is the -l option (verbose mode).
   To get the silent mode, use the "bk lock -q" option.

e) prs -d option now supports the -gt -lt -eq -ne -ge -le operators.

f) prs -d option no longer prints a line feed by default at the end of each
   delta record.

g) cset -t option has been moved to rset -l.
   cset -R option has been moved to rset -rA,B.

h) In release 1.x, the ignore filter will ignore a directory even if it has
   files under SCCS control. This is bad, since citool may miss files that
   need to be checked-in/committed.  In relesae 2.0, the ignore filter
   applies _only_ to g-files not under sccs control -- it does not ignore
   a directory wholesale.





New Features
----------------------------------------------------------------------------
a) For users who prefer their g-file to be visible always, even after a
   file is checked in or comitted, you can achieve this by adding the
   following line in the config file:
 	checkout:get
   or
 	checkout:edit
   or
 	checkout:none

   Users can also enable the preference on a per user, per host, per
   repsitory basis. This is done as a selection filter at the beginning
   of the reference line, e.g.:

   	[awc]:checkout:get
   or
   	[awc@work.bitmover.com:/home/bk/stable]checkout:edit
   or
   	[@work.bitmover.com]checkout:get
   or
   	[:/home/bk/stable]heckout:get

b) byte count transfered by each push/pull/clone command is
   logged in the repo-log
c) bk sfiles is much faster (4X) when scanning a large tree
   (this means citool should start up much faster)
d) The  Windows98/NT/2000 version now installs a helptool menu entry
   in the Bitkeeper menu.


Noteworthy Bug Fixes
----------------------------------------------------------------------------


Known bugs
----------------------------------------------------------------------------

Import and rcs2sccs still don't work nearly as well as we would like.
You can get your CVS tree converted, but it will take quite a bit of
handholding.  See the comments in rcs2sccs.perl.

Excessive use is made of files in /tmp.  There may be security issues
related to this.

LODs are still not implemented.

bkWeb is not working on NT yet.

----------------------------------------------------------------------------
All trademarks are property of their respective owners.


