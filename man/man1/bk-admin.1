.so ../bk-macros
.TH "bk admin" 1 20%E% "\*(BC" "\*(UM"
.SH NAME
bk admin \- administer \*(BK files (tags, checksums, validation)
.SH SYNOPSIS
.B bk admin 
.I
options
.BKARGS
.SH DESCRIPTION
.LP
The 
.B admin
command is used to create and/or administer \*(BK files.
.SH OPTIONS
.\" Undocumented on purpose:
.\" ATT compat: -a, -e, -d, -n
.\" -s
.if t .TP .8i
.if n .TP 1.6i
.B \-0
add a 1.0 delta if there is not one already.
.nr tp_space .065i
.tp
.OPTopt \-C csetfile
set or remove the changeset file pointer in the 1.0 delta
(very rarely used, \fBnot\fP recommended).
.tp
.B \-D
remove the delta changeset marks (very rarely used, \fBnot\fP recommended).
.tp
.OPTreq \-f flag
set 
.ARG flag 
which can be any of:
.if t .RS .8i
.if n .RS .4i
.tp
.B BITKEEPER
mark the file as a \*(BK file (very rarely used, \fBnot\fP recommended)
.tp
.B EXPAND1
expand keywords in first line that contains keywords only (printf conflicts)
EXPAND1 must be explicitly set or set in the BitKeeper/etc/config file.
See bk help config-etc.
.tp
.B EOLN_NATIVE
use the operating system's native end-of-line termination.
EOLN_NATIVE is set to "on" by default.  To make the
default have EOLN_NATIVE be set to "off" put eoln:unix in the
BitKeeper/etc/config file (see bk help config-etc).
.tp
.B NOMERGE
do not attempt to automerge this file, treat it as if it were a
binary file and force a choose local or choose remote style merge.
.tp
.B RCS
expand RCS keywords, i.e., $\fIkeyword\fP$ etc.
RCS must be explicitly set or set in the BitKeeper/etc/config file.
See bk help config-etc.
.tp
.B SCCS
expand SCCS keywords, i.e., %\fIK\fP% etc.
SCCS must be explicitly set or set in the BitKeeper/etc/config file.
See bk help config-etc.
.tp
.B YEAR4
display dates as 4 digit years 
.RE
.LP
.tp
.OPTreq \-F f
delete flag 
.ARG f ,
reverting to default behavior
.tp
.B \-h
check s.file structure in general, but limited to \*[ATT] features.
.tp
.B \-hh
as above, but also check \*(BK structure.
.tp
.B \-hhh
as above, but also check time stamps.
.tp
.B \-H
same as -h, plus check that file contents are ASCII.
.tp
.OPTopt \-i file
read initial text from
.ARG file
(default stdin).
.tp
.OPTreq \-M merge
Mark branch specified by revision
.ARG merge
as merged into 
.ARG rev ,
if specified, or top of trunk.
.tp
.OPTopt \-p path
set path of the most recent delta to 
.ARG path ,
if
.ARG path
was specified, otherwise use the current file location.  Note: not a timesafe
operation, typically used only by 
.BR bk\ import .
.tp
.B \-q
run quietly.
.tp
.OPTreq \-r rev
may be used with 
.B \-M
to specify a revision other than top of trunk,
and, when not in a \*(BK repository, with 
.B \-i
to specify the initial revision.
.tp
.OPTreq \-t file
read description text from 
.ARG file
and replace the current descriptive text, if any.
.tp
.B \-T
clear description text.
.tp
.B \-u
force all timestamps to be increasing (very dangerous, this changes the keys).
.tp
.OPTreq \-y comment
make 
.ARG comment
be the checkin comment for the initial checkin (only valid with 
.B \-i
and
.BR \-n ).
.tp
.B \-z
recalculate file checksum.
.tp
.OPTreq \-Z alg
compress stored s.file with 
.ARG alg
which may be:
.if t .RS .7i
.if n .RS .7i
.if t .tp
.if n .tp
.B  gzip
like 
.BR gzip (1)
.tp
.B none
no compression
.RE
.br
.if t .ll 6.5i
.if n .ll 6.5i
.SH BUGS
.LP
This command does way too much and is likely to be split apart.
Do not depend on these options for scripts.
.SH SEE ALSO
.LP
.SA chmod 1
.SA delta 1
.SA get 1
.SA new 1
.SA prs 1
.SA tag 1
.SA keywords
.SA config-etc
.SH CATEGORY
.B Admin
