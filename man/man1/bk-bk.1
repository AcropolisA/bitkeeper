.so ../bk-macros
.TH "bk" "\*[BKVER]" %E% "\*(BC" "\*(UM"
.SH NAME
bk \- \*(BK configuration management system front end
.SH SYNOPSIS
.B bk 
.[OPTopt] \-@ url
.[B] \-q
.[B] \-ANPR
.[OPTopt] \-[1acpx]r dir
.ARG command 
.[ARG] options
.SH DESCRIPTION
.B bk
is the front end to all \*(BK commands.
All \*(BK commands are prefixed with 
.B bk
in order to avoid ambiguity with
non-\*(BK commands that might be already installed on the system such as 
.B bk co
and
.BR "bk ci" .
.LP
If you are looking for instructions on how to get started, try running the
test drive at
.BR http://www.bitkeeper.com/Test.html .
.SH OPTIONS
.TP -r[\*<dir\*>]\ 
.OPTopt \-@ url
Run the command in the specified repository rather than locally.
If
.ARG url
is not specified, then use the parent[s] of the current repository.
If there are multiple parents, incoming and/or outgoing, use all of those
parents.
You can use the construct
.OPTreq \-@@ file
to specify a file containing a list of repository URLs, one per line;
the command is run in each of the remote repositories.
.IP
The
.OPTopt \-r dir
option works as expected, running the command recursively over all
of the implied files.
If specified,
.ARG dir
must be relative to the root of the remote repository.
.IP
If 
.Q \-
is the last argument, then the standard input is read and buffered.
Each remote command receives the same input.
.tp
.B \-A
In a nested collection, this option will cause the command to be run 
in the product and then in each of the components;
in a standalone repository this option has no effect.
The
.B \-A
is stripped from the options but all others are passed through.
For example, to integrity check the product
and all component repositories in succession:
.DS
$ bk -Ar check -acv
.DE
.tp
.B \-N
In a nested collection,
starting at the root of the product repository, apply
.ARG command
recursively to all files in the product and each of the
component repositories;
in a standalone repository this option is the same as
.BR \-r .
For example, to check out all files in a nested collection:
.DS
$ bk -N co
.DE
The difference between this and the 
.B \-A
option is that this one runs from the root of the product for all files;
.B \-A
runs from the root of the product, then the root of each of the components
in turn.  Certain commands, such as
.BR check ,
will only work with
.BR \-A .
.tp
.B \-P
Change directories to the root of the product repository before running
.ARG command .
Same as 
.B \-R
in a non-nested collection.
.tp
.B \-q
For remote commands (\-@) or multi-repository commands (\-A), the output
from running the command in each repository is prefixed with a header:
.DS
#### \*<repo-url or location\*> ####
.DE
The
.B \-q
option suppresses that header.
.tp
.B \-R
Change directories to the root of the repository before running
.ARG command .
.tp
.OPTopt \-r dir
Starting at 
.ARG dir ,
or the repository root if 
.ARG dir
was not specified, apply
.ARG command
recursively to
.ARG dir
and all subdirectories.
This works by generating a list of files and passing them to
.ARG command
on the standard input.
.tp
.B \-1acpx
One or more of these options may be used in combination with 
.Q \-r
to limit the set of files passed to
.ARG command .
.\" HEY!  YOU!  Man page hacker.  If you change these make sure you follow
.\" whatever bk-sfiles.1 says, that's the authoritative source, OK?  Thanks!
.RS
.TP ABCD
.B \-1
Only examine the current (or named) directory.
Do not go into subdirectories.
.tp
.B \-a
Examine all files, even if listed in
.BR BitKeeper/etc/ignore .
.tp
.B \-c
List changed files (locked and modified).
See EXAMPLES below for a typical usage.
.tp
.B \-p
List files with pending deltas.  
.tp
.B \-x
List files which have no revision control files.
See EXAMPLES below for a typical usage.
.RE
.SH EXIT STATUS
Unless otherwise documented, all \*(BK commands return exit status
0 on success and greater than 0 on failure.
.SH EXAMPLES
.LP
The following commands are equivalent:
.DS 6
bk -r co
bk -R sfiles | bk -R co -
cd \`bk root\`; bk sfiles | bk co -
.DE
An example usage for generating a patch of all
new and/or changed files:
.DS
$ bk -cxr diffs -Nu
.DE
.SH "SEE ALSO"
.SA sfiles
.SH CATEGORY
.B Repository
.SH AVAILABILITY
The \-A/\-P options of this command are an optional feature of \*[BK]
and must be enabled in your license.
To see if your license is so enabled, run 
.DS
bk lease renew
bk lease show
.DE
If the options field has "nested" or "nested-pro" listed then your
license has this feature enabled.
If not, contact BitMover sales.
