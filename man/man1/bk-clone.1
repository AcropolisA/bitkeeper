.so ../bk-macros
.TH "bk clone" "\*[BKVER]" %E% "\*(BC" "\*(UM"
.SH NAME
bk clone \- create a new copy of a package
.SH SYNOPSIS
.B bk clone
.[B] \-ql 
.[OPTreq] \-B url
.[OPTequal] \-E e v
.[OPTreq] \-M mod
.[OPTreq] \-r rev
.ARG from
.[ARG] to
.SH DESCRIPTION
.LP
The clone command copies from the 
.ARG from
repository and creates a
copy at
.ARG to .
If 
.ARG to 
is not specified then the basename of
.ARG from
is the implied destination.  This works for fully and partially specified
pathnames as well as \*(BK URLs.
See 
.B bk help url
for further naming information.
.LP
If
.ARG bam_url
is specified, it tells the destination repository what to use as a
BAM server.
Normally a new repository inherits the BAM server URL from the source
repository.
This argument is required when cloning a BAM server to a BKD.
.LP
If 
.ARG rev
is specified, the cloned repository will include only
changesets up to and including 
.ARG rev .
.LP
The cloned repository remembers from which repository it was cloned.
The 
.ARG from
repository is known as the \*(lqparent,\*(rq while the newly cloned
repository is known as the \*(lqchild.\*(rq
.LP
Subsequent updates to the child can be done by running 
.BR bk\ pull .
Changes made in the child can be pushed back into the parent by running
.BR bk\ push .
.SH NOTE
Only completed changesets are cloned.  Any pending deltas are removed
from the child before the clone completes.
.SH OPTIONS
.TP \-E\*<env\*>=\*<val\*>
.OPTreq \-B url
Set the BAM server url to 
.ARG url
in the destination repository.
.tp
.OPTequal \-E env val
Export an environment variable to the 
.B bkd
running in the remote \*(BK repository.
Typically used to pass information to remote triggers.
Only variables with the prefix
.V BKU_
are allowed.
.tp
.B \-l
Clone using hard links instead of copying the data.  
This is faster and saves disk space, but only works 
within filesystems supporting hard links.
.tp
.OPTreq \-M module
When cloning a product, limit the components to those implied by
.ARG module .
This option may be repeated to clone more than one module.
.tp
.B \-q
Run quietly.
.tp
.OPTreq \-r rev
Clone the repository up to and including cset 
.ARG rev .
A changeset number or changeset key can be used to specify
.ARG rev .
See
.B bk help terms
for more information.
.SH "SEE ALSO"
.SA BAM
.SA bkd
.SA parent
.SA pull
.SA push
.SA relink
.SA terms
.SA triggers
.SA url
.SH CATEGORY
.B Common
.br
.B Repository
.\" help://lclone
.SH AVAILABILITY
The \-M option of this command is an optional feature of \*[BK]
and must be enabled in your license.
To see if your license is so enabled, run 
.DS
bk lease renew
bk lease show
.DE
If the options field has "product" or "product-line" listed then your
license has this feature enabled.
If not, contact BitMover sales.
