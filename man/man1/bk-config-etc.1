.so bk-macros
.TH "bk config-etc" 1 2002/02/05 "\*(BC" "\*(UM"
.SH NAME 
bk config-etc \- configuring \*(BK per repository
.SH DESCRIPTION
\*(BK config files contain repository configuration information including
project description, licensing information, logging information, 
user preferences, BKWeb preferences, and contact information.
Each \*(BK repository must have the minimum configuration
information available in order to properly execute \*(BK commands.
.LP
Repository configuration information can be stored in two files, a
repository level config file and a system level config file:
.TP 2.6i
.B
BitKeeper/etc/config
Repository level config file (required)
.tp
.B
/etc/BitKeeper/etc/config
System level config file (optional)
.LP
Repository level configuration specifications always take precedence over
system level specifications, meaning,
if both BitKeeper/etc/config and /etc/BitKeeper/etc/config files exist, 
BitKeeper/etc/config values are augmented by /etc/BitKeeper/etc/config
values that do not exist in BitKeeper/etc/config.   BitKeeper/etc/config
values will not be replaced by values in /etc/BitKeeper/etc/config.
.LP
Minimum content requirements for the BitKeeper/etc/config file 
are the key value pairs for 
.DS
logging:
description:
email:
.DE
(See "CONFIG FILE ENTRIES" section below for allowed values.)
.LP
A default config file may be created in order to make setup easier
consistent for every repository on the system by creating a file,
.DS
/etc/BitKeeper/etc/config.template
.DE
that is readable by all bk users on that system.
If this file exists, bk setup will automatically use that as the 
BitKeeper/etc/config file.  See bk help setup for more information.
.SH "CONFIG FILE ENTRIES"
.SS LICENSE KEY
.LP
The use of \*(BK without Open Logging enabled requires a commercial
license key.  You can obtain a 30-day license for evaluation by
emailing a request to sales@bitmover.com.
.LP
Once a license key is obtained, add a line to BitKeeper/etc/config
that looks like:
.DS
license: <license key>
.DE
.SS LOGGING
.LP
If there is an address to which you would like logs to be sent add
a line to BitKeeper/etc/config:
.DS
logging:\c
.ARG address
.DE
.LP
To set up Open Logging for the repository add a line to BitKeeper/etc/config:
.DS
logging: logging@openlogging.org
.DE
.SS LOGGING CONFIRMATION
.LP
To configure the repository to not ask for confirmation
to send logs, put the
following line in the BitKeeper/etc/config file:
.DS
logging_ask:no
.DE
By doing this you are agreeing to send logs for all instances of
this repository.
.SS DISABLE LOGGING
.LP
To disable logging add a line to BitKeeper/etc/config:
.DS
logging:none
.DE
Please be aware this option is only available to customers with commercial
licenses and single users.
.SS SINGLE USERS
.LP
To set the package for a single user add the following lines to the
BitKeeper/etc/config file:
.DS
single_user:\c
.ARG user_name
single_host:\c
.ARG host_name
.DE
Please note, single user repositories can be changed to multi-user 
repositories, but they can not be changed back to single_user repositories.
See bk multiuser.
.SS "PROJECT INFORMATION"
.LP
The config file can contain information that helps describe the project.
The description field is required.
.DS
description:
category:
.DE
The values for these entries can be anything.
.SS "CONTACT INFORMATION"
.LP
By filling in the contact information, you are providing a contact
person for the project in the event that BitKeeper discovers a 
problem that requires local intervention.
The email field is the only required field.
.DS
contact:
email:
street:
city:
state:
postal:
country:
phone:
cell:
pager:
hours:
.DE
.SS USER PREFERENCES
.LP
Repository preferences can be defined in the BitKeeper/etc/config file.
The general format for the repository preference config file is 
.DS
[filter]preference:option
.DE
.LP
The optional filter can be any of the following:
.TP 1.4i
.B no filter
preference:option
.tp
.B empty filter
[]preference:option
.tp
.B per user
[jdoe]preference:option
.tp
.B per host
[@xyz.com]preference:option
.tp
.B per pathname
[:/path/to/repo]preference:option
.tp
.B per user@host
[jdoe@xyz.com]preference:option
.tp
.B per repository
[:/path/to/repo]preference:option
.br
[@xyz.com:/path/to/repo]preference:option
.br
[jdoe@xyz.com:/path/to/repo]preference:option 
.LP
Preferences can be listed multiple times with different filters.
The filters are examined in order and the first line that
matches the current user, host, and pathname is used.  So in general
the most restrictive directives should appear first.
.SS Keyword Expansion
.br
Keyword expansion is turned OFF by default.  To have keyword expansion
flags applied to a file automatically upon checkin, add the keyword
preference to the BitKeeper/etc/config file.
.LP
Keyword preference options are:
.TP .80i
.B sccs
expand SCCS keywords (%keyword%).
.tp
.B expand1
expand keywords in the first line that contains keywords only (avoids printf
conflicts).
.tp
.B rcs
expand rcs keywords ($keyword$)
.LP
For example, having
.DS
keyword: sccs, expand1
.DE
in the config file will expand SCCS keywords only in the first line
encountered that contains sccs keywords. 
.SS Line Termination
.br
The unix and win32 operating systems use different characters to represent
line terminations (eoln).  \*(BK, by default, sets the EOLN_NATIVE flag
to "on" when an sfile is created.  EOLN_NATIVE mode means that files checked
out on Windows will have the Windows eoln and files checked out on UNIX will
have the UNIX eoln.
To force the UNIX eoln mode on all platforms use:
.DS
eoln:unix
.DE
to the BitKeeper/etc/config file.  
.LP
There is no way to force the Windows eoln mode on all 
platforms.
.SS Checkout Mode
.br
Specify checkout mode for a repository.  The default is to not show 
gfiles unless files are checked out.  To override the default, to 
have gfiles checked out in read-only or read-write mode, a line
must be added to the BitKeeper/etc/config file as follows:
.DS
[filter]checkout:option
.DE
Where option is one of:
.TP
.B get
Automatically do a bk get
.ARG file
after doing a bk delta
.ARG file .
(Checkout in read-only mode.)
.tp
.B edit
Automatically do a bk edit
.ARG file
after doing a bk delta
.ARG file .
Note: This will also
adjust the modification time of the s.file to be one second before the 
modification time
of the gfile, which is needed in order to prevent make(1) from attempting
to reget the file.
(Checkout in edit mode.)
.tp
.B none
Clear the gfile after doing a bk delta
.ARG file .
(This is the default.)
.SS Compression
.br
By default, when you setup a repository the compression algorithm
will be set to gzip in the BitKeeper/etc/config file with a line
as follows:
.DS
compression:gzip
.DE
This results in the compression of stored
s.files.  In other words, when you run
.DS
bk new
.DE
what really happens is
.DS
bk new -Zgzip
.DE
To make the repository use no compression by default, 
change the compression line in the BitKeeper/etc/config
file to be:
.DS
compression:none
.DE
See bk help delta for more information about the -Z option for compression.
.SS BKWEB PREFERENCES
.LP
BKWeb preferences can be specified in the BitKeeper/etc/config file.
If these preferences are specified, information given will appear on the
BKWeb site for the project.
.TP 1i
.B bkweb
specify the BKWeb address for a project
.tp
.B homepage
the home page for your project or company
.tp
.B master
the location from which source can be cloned
.LP
For example,
.DS
bkweb:    http://www.bitkeeper.com:8888//home/bk/stable
master:   bk://www.bitkeeper.com:7000
homepage: http://www.bitkeeper.com
.DE
.SH "SEE ALSO"
.SA config-gui 1
.SA config 1
.SA setup
.SA admin
.\" help://configuration
.\" help://user preferences
.\" help://repository preferences
.SH CATEGORY
.B Overview
.br
.B Admin
