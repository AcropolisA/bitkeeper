.so ../bk-macros
.TH "bk repogca" "\*[BKVER]" %E% "\*(BC" "\*(UM"
.SH NAME
bk repogca \- show greatest common ancestor across a set of repositories
.SH SYNOPSIS
.B bk repogca
.[OPTreq] \-d spec
.[B] \-k
.[ARG] repository\ .\|.\|.
.SH DESCRIPTION
This command will print the latest revision in the current repository
that exists in all of the the remote repositories either listed on the
command line or implied in the parent pointer[s].
By default,
.C \`bk parent\`
is the remote repository. 
.SH OPTIONS
.TP \-d\*<spec\*>
.OPTreq \-d spec
Use
.ARG spec
as the specification for displaying the revision.
.tp
.B \-k
A short hand for asking for a spec of \*(lq:KEY:\*(rq.
.SH EXAMPLES
To generate a GNU patch for the changes that exist only in the local repository:
.DS
bk export -tpatch -r\`bk repogca\`,+ > patch
.DE
To throw away all local work that doesn't exist in a remote repository:
.DS
bk undo -a\`bk repogca URL\`
.DE
.B Warning:
This 
.I might
also throw away some local csets which also exist in the remote
repository.
That can happen if there are multiple common ancestors on different
branches.
The ancestor choosen is the one created most recently.
.SH EXIT STATUS
.LP
.B bk repogca
returns exit status:
.TP
0
on success.
.tp
1
on failure.
.SH "SEE ALSO"
.SA gca
.SA dspec
.SH CATEGORY
.B Utility
