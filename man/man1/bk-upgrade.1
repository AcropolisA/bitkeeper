.so ../bk-macros
.TH "bk upgrade" "\*[BKVER]" %E% "\*(BC" "\*(UM"
.SH NAME
bk upgrade \- Check for new versions of BitKeeper
.SH SYNOPSIS
.B bk upgrade
.[B] \-infq
.[ARG] srcurl
.SH DESCRIPTION
.LP
The
.B bk upgrade
command contacts \*[BM]'s servers using HTTP to see if new versions
of \*[BK] are available for download.  If a new version is found
for this platform, then the user is notified.
.LP
New versions are fetched from the following location:
.DS
http://upgrades.bitkeeper.com/upgrades/
.DE
This source URL can be replaced with a different URL or local pathname
on the command line.  This can be used if \*[BK] cannot make
external HTTP connections to the upgrades site, for local mirrors, or
special releases.
.SH OPTIONS
.TP
.B \-i
If a new version of \*[BK] is found for this platform, then
download it and run the installer.
.tp
.B \-n
Only fetch the installer for a new version of \*[BK], but don't
install it.
.tp
.B \-f
If the
.B bk upgrade
command is unable to determine if the currently installed version of
\*[BK] has been replaced by a newly released version, then an
warning message is printed and the upgrade is aborted.  The
.Q \-f
option allow the user to force the new version to be used.
.tp
.B \-q
This causes the upgrade program to suppress extra output when running.
.SH EXAMPLES
To check for new upgrades:
.DS
bk upgrade
.DE
To install a new version of bk:
.DS
bk upgrade -i
.DE
To upgrade a given installation of bk on this machine:
.DS
/home/user/bitkeeper/bk upgrade -i
.DE
To fetch the latest installer:
.DS
bk upgrade -nf
.DE
.SH NOTES
The default URL that \*[BK] uses to search for new updates can be
overridden with the
.Q upgrade-url
config option.  This will usually be
used in a corporate environment to prevent users from using a new
version of \*[BK] that hasn't been certified locally. Usually an
internal URL will be put in a config file in the \*[BK] install
directory.
.SH EXIT STATUS
0 if a new version of \*[BK] is found
.br
1 if no updates are available.
.br
2 if errors occurred fetching new updates.
.SH "SEE ALSO"
.SA config-etc
.SH CATEGORY
.B Utility
