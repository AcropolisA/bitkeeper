#chk1
A file is marked as gone (in BitKeeper/etc/gone) but is present in your
repository, possibly missing some deltas.  This can happen if a different 
repository had lost the file, marked it as gone so that "bk -r check -a" 
would pass, and then your repository was updated with that information.
Since your repository still has the file, it may be possible to restore
it in the other repository if you wish.

The other case is that someone is trying to destroy all instances of the
file's revision history.  Suppose a large file were added by mistake,
perhaps a derived (compiled) file or binary.  

Examine the files listed and if it is clear the file is obsolete, remove
the revision history from your repository to be consistent with your parent.

If it is clear that the file is valuable then you should have the
owner of the other repository restore the file from your repository.
After the file is restored, remove the file identifier (root key) from
the BitKeeper/etc/gone file.  If you have only part of the revision
history then remove the root key from the BitKeeper/etc/gone but add
the missing keys with a

	bk -r check -aggg | bk gone -

$
#chk2
A pointer to a delta was found in the ChangeSet file but the delta was
not found in the corresponding file.  This should only happen if one or
more files have been lost in a repository, copied from another repository,
but they were incomplete.

To get the list of missing deltas, run "bk -r check -agg".

To see if any of the deltas exist in another repository, use "bk findkey".

If the deltas exist in another repository it is possible to migrate them
into your repository.  The process is to generate the list of changesets
which contain the missing deltas, make a patch, and apply the patch.
You should probably contact BitMover for help with this the first time
you try this process.

If the deltas cannot be found in any other repository, then you will
not be able to completely reproduce that changeset.  You can make
BitKeeper stop complaining about the problem by running

	bk -r check -agg | bk gone -

and then committing the changeset.
$
#chk3
One or more files are recorded as existing by the ChangeSet file but were
not found in the repository.  This can happen if the files were deleted,
either accidentally or on purpose.

If the files exist in another repository it is possible to add them back
to your repository.  The process is to find the files, copy them into
your repository, and strip off any extra deltas which should not be part
of your repository.  You should probably contact BitMover for help with
this the first time you try this process.

If the files cannot be found, or if the files were delibrately removed,
then the file identifiers (root keys) need to be added to the gone file.
Do this by running

	bk -r check -ag | bk gone -

and then committing the changeset.
$
#chk4
One or more files has LOD data in it.  The first approach we took to
LODs was not a good one and we are trying to remove all vestiages of
that approach.  Other than the MySQL repository, we know of no examples
of LOD usage at the current time.  If this is the MySQL tree, you may
safely run

	bk -r check -aff

to fix up your repository.  If it is not, contact BitMover.
$
#write_perms
One or more directories which need updating do not have write permission.
Please examine the list and fix the permissions.

You can restart the resolve with a 

    bk resolve

after fixing the permissions.
$
#setup_1

You are about create a new repository.  You may do this exactly once
for each package stored in BitKeeper.  If there already is a BitKeeper
repository for this package, you should do

    bk clone package_dir my_package_dir

If you create a new package rather than resyncing a copy, you will not
be able to exchange work between the two packages.

$
#setup_2
Please create a description of this package.  A brief description is
probably best. For example:

    The Linux Kernel
or
    The GNU C compiler

If you are using a word processor to edit the package description,
please save the file as a plain text document.
$
#setup_3
Please fill out the configuration template in your editor.
This is used for support purposes as well as licensing.
$
#chkconfig_missing

Your BitKeeper package is missing the config file

    BitKeeper/etc/SCCS/s.config

This should not have occurred, but since it did, you can fix it
by doing the following:

    cp #BKARG#/bitkeeper.config BitKeeper/etc/config
    # edit it to reflect your site
    vi BitKeeper/etc/config
    bk new BitKeeper/etc/config

and then try this command again.

$
#chkconfig_inaccurate

Your config file, BitKeeper/etc/config, does not reflect your site.
Please check it out ("bk edit BitKeeper/etc/config"), modify it to
reflect your site, check it in, and try this command again.

$
#license_grace
Your license for BitKeeper has expired but you are still
within the grace period.  This changeset will be created
as normal, but you need to contact BitMover and purchase an
updated license.

BitMover can be reached in the United States at 415-401-8808
during business hours (PST) or via email at sales@bitmover.com.
Thanks!
$
#license_almost
Your evaluation license for BitKeeper is less than one week away from
expiring.  This changeset will be created as normal, but you need to
contact BitMover and purchase a commercial license.

BitMover can be reached in the United States at 415-401-8808
during business hours (PST) or via email at sales@bitmover.com.
Thanks!
$
#license_expired
Your license for BitKeeper has expired.  You are beyond the
grace period and you may not create any changesets until you
have contacted BitMover to purchase a license.

For more information, please run "bk helptool license"

BitMover can be reached in the United States at 415-401-8808
during business hours (PST) or via email at sales@bitmover.com.
Thanks!
$
#config_license
#license_none

You do not have a license for BitKeeper and the logging field in the
BitKeeper/etc/config file is not set to "logging@openlogging.org".
You either need a commercial license (to run without open logging),
or you need to convert your package to single user, or you need to
configure your package to use openlogging.  Until you have done one of
those, you may not create any changesets.

You can get a temporary license by sending a mail request
to sales@bitmover.com.  

BitMover can be reached in the United States at 415-401-8808
during business hours (PST) or via email at sales@bitmover.com.
Thanks!
$
#open_log_query
This repository is configured to send changeset summaries to
	#BKARG#
so others can follow your work.  This is called Open Logging.

We need to get an OK from each user that it is OK to publish the
change logs.  You should say no if you are working on proprietary
and/or sensitive information that you or your employer would not
want made public.  If you are working on an Open Source project,
or any other project whose existence and status can be publicized,
you can say yes.

Saying no means the changeset will neither be logged nor be
created, which means a loss of the distributed functionality
of BitKeeper.  If it is important that you keep the information
private, you can contact BitMover for a closed use license.
BitMover can be reached in the United States at 415-401-8808
during business hours (PST) or via email at sales@bitmover.com.

Saying yes will send the changeset comments and per file comments.
It will NOT send your source code.
Saying yes also means that you are accepting the terms of the BKL,
the license under which you obtained this software.  You can read
that license by saying "bk help license" in another window.

If you have been asked before it is because we ask once per host.
$
#closed_log_query
This repository is configured to send ChangeSet summaries to
	#BKARG#
This address is not an Open Logging server, it is a private 
server, probably inside your company.  If you don't wish to
send summaries to that server, change the logging field in the
BitKeeper/etc/config file.

In order to create this changeset, you need to confirm that it
is OK to send logs to this host.

If you have been asked before it is because we ask once per host.
$
#log_abort
Bitkeeper is aborting this commit.

This repository is for projects which wish to publish their progress via
Open Logging.  To purchase a copy of Bitkeeper without the Open Logging
feature, please contact sales@bitmover.com.  Thank you.
$
#close_log_abort
Bitkeeper is aborting this commit.

This repository has been configured to send log messages and unless you
agree to do so BitKeeper will not commit changes.  This is the policy of
the owner of this repository, not a BitMover policy.  Please consult the
repository owner/maintainer to resolve the issue.  Thank you.
$
#seat_info
Your user count have exceeded the number of purchased licenses.
To purchase more seats, please email sales@bitmover.com.  Thank you.

$
#logging+commercial
Open logging is not allowed on a commercial repository.
$
#testing-lic
The 'testing' license requires openlogging as well.
$
#no-accept-no-cset
Changeset not created due to license rejection.
$
#config-pending
Warning:  You have unsent config logs which are more than 2 weeks old.

bk commit will try to send the pending logs automatically before it exits.
Please verify the pending count is zero after bk commit is done.  To get
a count of the pending logs: use the following command:

	bk _lconfig -p

If pending count is still non-zero after bk commit is done, please run
the following command and email its output to support@bitmover.com:

	bk _lconfig -d
$
#config-max
Error: Max pending config messages exceeded, commit aborted.

This error indicates that the BitKeeper program was unable to contact
www.bitkeeper.com to send the configuration log.

There are two possible causes for this error:

a) Network connectivity problems
b) Problems with the server at www.bitkeeper.com

Please run the following command and email its output to support@bitmover.com:

	bk _lconfig -d
$
#unlogged-max
Error: Max pending log exceeded, commit aborted.

This error indicates that the BitKeeper program is unable to contact
www.openlogging.org to send the ChangeSet log[s]. The number of unlogged
changesets have exceeded the allowed threshold of #BKARG# changesets.

There are two possible causes for this error:
a) Network connectivity problems
b) Problems in the logging tree at www.openlogging.org

Please run the logging command in debug mode to see what the problem is:
	bk log -d
If you have ruled out a network connectivity problem at your local network,
please email the following information to support@bitmover.com:
a) Output of the above logging command
b) Root key of your project using the following command:
	bk identity
$
#unlogged
Warning: BitKeeper allows a limited number of offline commits.  Your quota
is currently #BKARG# changesets and you will not be able to commit once
your quota is down to zero. Please check your network configuration
and make sure logs are being transmitted properly. You can test your log
transmission with the command "bk log -d".
$
#single-file-max
Error: Single user repositories are limited to #BKARG# files. If you need more
files than that in one repository, you need to buy a commercial license or
turn on open logging.
$
#eval-max
Error: Evaluation license are limited to #BKARG# changesets.  You are over 
that limit and you will need to purchase a commercial license to make any
more changesets.
$
#eval-warn
Warning: Evaluation licenses have a limited number changesets. Your
changeset quota is now down to #BKARG# which is less than 50 changesets
away from the limit.  You will not be able to commit any more changesets
when the quota reaches zero.  Please upgrade to a commercial license.
$

#bugtemplate
BitKeeper Bug Report
--------------------

Please fill in the fields below as much as possible.  We parse this
automatically, so please follow the format guidelines.

Fields marked with [whatever] are single line fields.

The Description, Suggestions, and Contact sections can be multi line.

------------------------------------------------------------------------------

Bug/RFE:
	[bug is obvious, RFE is request for enhancement]

Severity:
	[5 - no big deal, 1 - can't use BitKeeper until this is fixed]

Priority:
	[5 - fix whenever, 1 - fix RIGHT NOW]


Program:
	[cset, co, delta, etc.  If you know which caused the problem]

Release:
	#BKEXEC# bk version | head -1

OS:
	#BKEXEC# uname -a

Synopsis:
	[one line: i.e., sfiles dumps core when running on CP/M]

Description:
	Please tell us:
	- what you were doing
	- what happened
	- can you make it happen again, if so, how?
	- what you think went wrong
	- machine / OS / etc on which the bug occurred
	- anything else that you think might be useful
	Take as much space as you need, but leave a blank line
	between this and the next field.

Suggestions:
	Any suggested fix is most welcome.
	Take as much space as you need, but leave a blank line
	between this and the next field.

Interest list:
	[emails of others who care about this like so: a@foo.com,b@foo.com]

Contact info:
	Your contact information here.
	A phone number and a time to call is useful if we need more
	information.
	You can also specify a preferred email address.
	Take as much space as you need, but leave a blank line between
	this and the ----- below.

------------------------------------------------------------------------------
$
#duplicate_IDs
You need to figure out why you have two files with the same ID
and correct that situation before this ChangeSet can be created.
$
#consistency_check

BitKeeper is running a consistency check on your system because it
has noticed that this check has not yet been run on this repository.
This check is a one time event, but takes quite a while on large
repositories (approximately one minute per 1000 files).  

Please stand by and let the process finish (i.e. do not kill this process).

$
#undo_error

BitKeeper is unable to undo the requested changeset[s].  This is
usually because undoing the requested list of changesets would leave the
repository in an error state.  Please look at the error message below
and try to find a set of ChangeSets which will work.  The typical
problems are:

    - Removing a delta in the middle of the history which leaves
      a parentless child delta.
    - The merge delta and a portion of a branch is deleted which
      leaves two open branches in the ChangeSet file.
    - Removing a delta which is included by another delta.

It is frequently helpful to look at the ChangeSet file with sccstool to
get a feel for which changesets must be undone together to leave a clean
tree.

The error caused by this undo is:
$
#version
BitKeeper#BKARG#version is @version@
Built by: @builder@
Built on: @built_date@
$
#config_preamble
This is the BitKeeper configuration for this package.

Please take a minute to fill it out carefully, it needs to be accurate.

NOTICE: you really do want to fill this out, if something goes wrong
with your repository, or if someone changes the logging policy, we
send mail to the contact listed here for confirmation.

BitKeeper can maintain a log of your change comments (not your source,
just the comments) on a centralized server.  This is useful as your
project grows, it gives people a place to go see what is happening on
a per project basis.  This is especially useful for distributed developers.

$
#config_setup
The setup program is used when creating the initial package stored 
in BitKeeper.  Running this tool will create the master repository.
You may do this exactly once for each package stored in BitKeeper.  

If this package is already stored somewhere in BitKeeper, get out
of this tool and do the following:

        bk clone package_dir my_workarea

instead.

$
#config_description

Name of the project, such as "BitKeeper" or "The GNU C compiler".

$
#config_category

What (RedHat package) category this project fits into, if any.

$
#config_logging

Open Logging server.  This site is where users go to see the
ChangeSet comments for all instances of this repository.  This must
be logging@openlogging.org for usage under the terms of the BKL,
"bk help bkl" will show you the default licensing terms.  If this
repository is commercial it can be an internal email address or "none"
to disable logging.

$
#config_contact

Contact person for this project.  This is whoever is the person that
should be contacted with update information or contacted if BitKeeper
discovers a problem which requires local intervention.  Please make the
contact information accurate so we can support you.

$
#config_email

It is very important that this email address is filled out and accurate.
If someone converts your repository to open logging (which you may not
want), we will contact this email address for confirmation that you really
did want open logging.  If the email address is inaccurate and we get no
response from anyone else at your location after 90 days, then open logging
will be implicitly approved.

$
#config_street

Add your street address if you like, it is optional.

$
#config_hours

Business Hours when we can contact you if you left a phone number.

$
#config_single_user

If this field is set, all checkins will appear to be made by this user,
in effect making this a single user package.  Single user packages are
free from the logging constraint up to a maximum of 1000 files.  In order 
for the package to really be free, both the single_user and the single_host 
field need to be set.

$
#config_single_host

If this field is set, all checkins will appear to be made on this host.

$
#config_compression

Default compression algorithm for stored s.files is gzip.
If you want no compression, set this to "none".

$
#config_autofix

Default is to autofix problems found by check.
If you want to manually fix them, set this to "no".

$
#config_template
description
category
logging
license
licsign1
licsign2
licsign3
single_user
single_host
compression
autofix
contact
email
street
city
state
postal
country
phone
cell
pager
hours
$
#warn_poly
Warning: this repository has been found to have deltas which
belong to multiple csets (not an error, but annoying).
This happens if a repository with uncommitted deltas is copied
and then committed in both copies.
Please use only 'bk clone <from> <to>' to copy a repository.
$
#reserved
BitKeeper is unable to create a file with the following path name:
        #BKARG#
This usually happens if your path name contains a reserved name used on
the destination file system.  Known reserved names for FAT/NTFS/Samba/CIFS
file system are as follows:
        "aux", "con", "prn", "nul", "lpt?", "?:"
Please rename the file and retry (see also "bk helptool mv")
Note: You must do the rename in the sending repository.
$
#setup_categories
amusements/games
amusements/graphics
amusements/multimedia
applications/archiving
applications/communications
applications/databases
applications/dos/windows connectivity
applications/editors
applications/emulators
applications/graphics
applications/mail
applications/mail/www/news tools
applications/math
applications/networking
applications/news
applications/productivity
applications/publishing
base
base/kernel
daemons
development/building
development/debuggers
development/languages
development/languages/tcl
development/libraries
development/libraries/libc
development/system
development/tools
documentation
games
libraries
networking
networking/admin
networking/daemons
networking/development
networking/utilities
shells
system environment/base
system environment/file managers
system environment/printer support
user interface/gnome
user interface/kde
utilities
utilities/archiving
utilities/file
utilities/printing
utilities/system
utilities/text
x11
x11/amusements
x11/applications
x11/applications/graphics
x11/libraries
x11/utilities
x11/xfree86
x11/xfree86/servers
$
#setuptool_step_Begin
You are about to create a new repository. Creating a new repository is
something which is done if the data which you wish to manage is not
already under BitKeeper control in a different repository. If there
already is a BitKeeper repository for this package, you should do

bk clone package_dir my_package_dir

If you create a new repository rather than cloning a copy you will not
be able to exchange work between the existing and new repositories.
In other words, a repository is set up only once; after that you use
bk clone to get a copy of the repository


If you are ready to create a new BitKeeper repository, press Next.
$
#setuptool_step_EndUserLicense
Please take a moment to read the license agreement now. If you accept 
the terms below, click "I Agree", then "Next". Otherwise click Cancel.
$
#setuptool_step_LicenseType
BitKeeper provides three types of licensing. If you have received a bitkeeper
license key from BitMover, select "Commercial" and you will be prompted to
enter the key.

If you wish to use BitKeeper for free you must choose one of the other 
options. If you are a single user on a single host you may choose the
"Single User / Single Host" option in which case you will be prompted 
for a username and hostname. 

If you choose "Open Logging" you will not have to enter any data for the 
license, and all changes to the repository will be posted to openlogging.org
$
#setuptool_step_LicenseKey
Please enter the license key exactly as it was given to you. If this is a 
version 5 license key you must also enter the key signatures.

If the license keys are in a file, click the "From file..." button and the 
values will be extracted from the file. This should work even if the file 
has mail headers or other text, and is the easiest way to insure the keys 
are entered properly.
$
#setuptool_step_UserHostInfo
For single user / single host configurations you must enter a 
username and hostname. The username and hostname you supply will 
be recorded with every check-in in this repository.
$
#setuptool_step_RepoInfo
The following information uniquely identifies this repository. All fields 
are required to be non-empty in order for you to continue.

If the categories in the drop-down list don't meet your needs you may enter 
any category you like.
$
#setuptool_step_ContactInfo
The following information is optional.
$
#setuptool_step_Finish
There is now enough information to create the repository. Please review the 
following information. If it is correct, press the Finish button to create 
the repository.
$
#setuptool_step_KeywordExpansion
BitKeeper can automatically expand SCCS or RCS keywords in files when they are 
checked out in read-only mode. This feature is off by default, but you can
change this behavior by selecting the mode that best suits your needs.

You may choose either "sccs" or "rcs" expansion. In addition, you can specify 
"expand1" to mean you only want keywords to be expanded in the first line
that contains keywords. This helps avoid conflicts with printf statements or 
other code that may contain strings that look like keywords. 
$
#setuptool_step_CheckoutMode
By default, gfiles will be visible in a repository unless they are checked
out. You can modify this behavior by defining the checkout mode.

A value of "get" will cause a "bk get <file>" command to be executed 
automatically after a "bk delta", causing the file to be checked out 
in read-only mode. 

A value of "edit" will cause a "bk edit <file>" command to be executed
automatically after a "bk delta", causing the file to be checked out in 
edit mode.  This will also adjust the modification time of the s.file 
to be one second before the modification time of the gfile, which is 
needed in order to prevent make(1) from attempting to reget the file.

A value of "none" will clear the gfile from the repository after a 
"bk delta". This is the default behavior.
$
#setuptool_step_Compression
By default, when you set up a repository the compression algorithm will be 
set to "gzip". This will cause all s.files to be compressed in the 
repository. Setting this value causes the option "-Zgzip" to automatically be 
applied when running the "bk new" command. 

If you do not wish for the s.files in your repository to be compressed you
may turn this feature off by selecting "none".
$
#setuptool_step_Autofix
The bk check command can automatically fix a number of problems found
in a repository. By default this feature is turned on when a repository
is created. To turn this feature off select the value "no", in which case
the bk check command will not attempt to automatically fix problems it
detects.
$
#bitkeeper.init
#!/bin/sh
#
# bitkeeper    Start/stop the bitkeeper daemon.
#         @(#)bitkeeper.init 1.1 Copyright (c) 2000 Larry McVoy

# Source networking configuration.
if [ -f /etc/sysconfig/network ]
then . /etc/sysconfig/network

     # Check that networking is up.
     [ ${NETWORKING} = "no" ] && exit 0
fi
[ -x /usr/bin/bk ] || exit 0
VAR=/var/bitkeeper

case "$1" in
    start_msg) echo "Start BitKeeper daemons"
          ;;
    stop_msg)  echo "Stop BitKeeper daemons"
          ;;
    start)     cd $VAR || exit 1
          test -f repositories || {
               echo Nothing advertised
               exit 0
          }
          while read dir opts
          do   (
               cd $dir || exit 1
               F=`basename $dir`
               bk bkd $opts -l$VAR/log.$F -P$VAR/pid.$F
               echo Started bkd $opts in $dir
               )
          done < repositories
          ;;

    stop)
          cd $VAR || exit 1
          echo Shutting down BitKeeper daemons
          for i in pid.*
          do   kill -HUP `cat $i`
               rm $i
          done
          ;;

    status)    ps -axf | grep bkd
          ;;

    *)         echo "Usage: bitkeeper {start|stop}"
          exit 1
          ;;
esac
exit 0
$
#bkl_new_preamble
In order to use BitKeeper in this repository, you need to accept the 
BitKeeper license.  The BitKeeper license is what grants you the right
to use BitKeeper on this repository.  Please read the license carefully,
it is a contract and you must abide by the terms.  Your acceptance will be
recorded on this machine and you will not be asked again.
$
#bkcl_new_preamble
In order to use BitKeeper in this repository, you need to accept the
BitKeeper Commercial license.  This license is what grants you the right
to use BitKeeper on this repository.  Please read the license carefully,
it is a contract and you must abide by the terms.  Your acceptance will
be recorded on this machine and you will not be asked again.
$
#bkl_upgrade_preamble
#bkcl_upgrade_preamble
The BitKeeper license required for the use of this repository has changed
and you need to accept the new version in order to make changes in this
repository.  Your acceptance will be recorded on this machine and you will
not be asked again.
$
#repo_new_preamble
In order to use BitKeeper in this repository, you need to accept the
associated Repository license.  The Repository license is part of the
the repository and it is a condition of the BitKeeper license that you
agree with the Repository license.  Please read the license carefully,
it is a contract and you must abide by the terms.  Your acceptance will
be recorded on this machine and you will not be asked again.

This license was associated with this repository by the party who
initially created the repository.  Unless BitMover, Inc. created this
repository, this license was not written by BitMover and BitMover is
not responsible for the content of the license.
$
#repo_upgrade_preamble
The Repository license associated with the use of this repository has
changed and you need to accept the new version in order to make changes in
this repository.  Your acceptance will be recorded on this machine and you
will not be asked again.
$
#lic_alwaysOK
If you do not want to be prompted about license questions in the future,
set the environment variable BK_LICENSE to the value ACCEPTED.  Doing so
means that you are agreeing to any future versions of any license associated
with this repository.
$
