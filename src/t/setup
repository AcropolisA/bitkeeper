# All of the files in this directory are Copyright (c) 2000 BitMover, Inc.
# and are not licensed under the terms of the BKL (BitKeeper License).
# Standard copyright law applies.
# 
# Redistribution in modified form is prohibited with one exception:
#    proposed modifications may be sent back to dev@bitmover.com for
#    possible inclusion in future releases.  Sending such modifications
#    constitutes your permission for BitMover, Inc. to distribute  the
#    modifications under any license.

# Setup code for tests
# Copright (c) 1999 Larry McVoy
# %K%

cores()
{
        find "$BK_REGRESSION" -name core -print > "$BK_REGRESSION"/cores
        if [ -s cores ]
        then    ls -l `cat "$BK_REGRESSION"/cores`
                file `cat "$BK_REGRESSION"/cores`
                exit 10
        fi
}


# [ -w file ] always succeeds when you are root.
writable () {
	[ -f $1 ] || return 1
	case "`ls -l $1 | cut -c1-10`" in
	    *w*) return 0;;
	    *) return 1;;
	esac
}

checkLocks () {
	if [ -d BitKeeper/readers ]
	then	if [ `find BitKeeper/readers -type f -print | wc -l` -ne 0 ]
		then	echo Failed to remove read lock in `pwd`
			exit 1
		fi
	fi
	if [ -d BitKeeper/writer ]
	then	if [ `find BitKeeper/writer -type f -print | wc -l` -ne 0 ]
		then	echo Failed to remove write lock in `pwd`
			exit 1
		fi
	fi
}

cd "$BK_REGRESSION" || exit 1
